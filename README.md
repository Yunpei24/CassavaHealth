# CassavaHealth - Application de D√©tection des Maladies du Cassava

Une application mobile intelligente utilisant l'intelligence artificielle pour d√©tecter les maladies des feuilles de cassava (manioc) et aider les agriculteurs √† maintenir des cultures saines. L'application supporte deux modes d'analyse : **mod√®le local int√©gr√©** (hors ligne) et **API externe** (en ligne).

## üå± Fonctionnalit√©s

- **Double mode d'analyse** : Choisissez entre mod√®le local (hors ligne) ou API externe (en ligne)
- **Analyse en temps r√©el** : Prenez une photo d'une feuille de cassava et obtenez un diagnostic instantan√©
- **Import d'images** : Analysez des photos existantes depuis votre galerie
- **Historique complet** : Suivez toutes vos analyses pr√©c√©dentes avec statistiques
- **Guide des maladies** : Informations d√©taill√©es sur les maladies courantes du cassava
- **Multilingue** : Interface disponible en fran√ßais et anglais
- **Conseils de traitement** : Recommandations personnalis√©es pour chaque maladie d√©tect√©e

## üöÄ Installation et Configuration

### Pr√©requis

- Node.js (version 18 ou sup√©rieure)
- npm ou yarn
- Expo CLI install√© globalement : `npm install -g @expo/cli`
- Application Expo Go sur votre t√©l√©phone mobile

### Installation

1. **Cloner le projet**
```bash
git clone <votre-repo>
cd cassava-health
```

2. **Installer les d√©pendances**
```bash
npm install
```

3. **Configuration de l'API**

Si vous souhaitez utiliser le mode API, modifiez le fichier `.env` √† la racine du projet :

```env
# URL de votre API de d√©tection des maladies du cassava
EXPO_PUBLIC_API_URL=https://votre-api-cassava.com

# Cl√© d'authentification pour votre API (si n√©cessaire)
EXPO_PUBLIC_API_KEY=votre_cle_api_secrete
```

4. **Configuration du mod√®le local (optionnel)**

Si vous souhaitez utiliser un mod√®le local :

a. **Convertissez votre mod√®le** en format TensorFlow.js :
```bash
# Si vous avez un mod√®le TensorFlow/Keras
tensorflowjs_converter --input_format=keras your_model.h5 assets/models/

# Si vous avez un mod√®le TensorFlow SavedModel
tensorflowjs_converter --input_format=tf_saved_model your_saved_model/ assets/models/
```

b. **Placez les fichiers du mod√®le** dans `assets/models/` :
```
assets/models/
‚îú‚îÄ‚îÄ cassava-model.json    # Mod√®le TensorFlow.js
‚îú‚îÄ‚îÄ cassava-model.bin     # Poids du mod√®le
‚îî‚îÄ‚îÄ labels.json          # Configuration des labels
```

c. **Cr√©ez le fichier `labels.json`** :
```json
{
  "classes": [
    "healthy",
    "cassavaMosaicDisease", 
    "cassavaBrownStreak",
    "cassavaBacterialBlight"
  ],
  "treatments": {
    "healthy": "Aucun traitement n√©cessaire",
    "cassavaMosaicDisease": "Utiliser des plants r√©sistants, √©liminer les plants infect√©s"
  },
  "recommendations": {
    "healthy": ["regularMonitoring"],
    "cassavaMosaicDisease": ["isolate", "preventiveTreatment", "regularMonitoring"]
  }
}
```

5. **Lancer l'application en mode d√©veloppement**
```bash
npm run dev
```

6. **Scanner le QR code**
   - Ouvrez l'application **Expo Go** sur votre t√©l√©phone
   - Scannez le QR code affich√© dans votre terminal
   - L'application se lancera automatiquement sur votre t√©l√©phone

## üîÑ Basculer entre les modes d'analyse

L'utilisateur peut choisir le mode d'analyse dans les **Param√®tres** de l'application :

1. Ouvrez l'onglet **"Param√®tres"**
2. Dans la section **"Analyse"**, activez/d√©sactivez **"Mode d'analyse"**
   - **Activ√©** : Utilise le mod√®le local (hors ligne)
   - **D√©sactiv√©** : Utilise l'API externe (en ligne)
3. Le mode choisi est sauvegard√© automatiquement

## ‚öôÔ∏è Configuration pour Usage R√©el

### 1. Configuration du Mod√®le Local

**Fichier : `components/LocalModelService.ts`**

```typescript
// Modifiez ces lignes pour pointer vers vos fichiers de mod√®le
const modelAsset = Asset.fromModule(require('../assets/models/votre-modele.json'));
const labelsAsset = Asset.fromModule(require('../assets/models/votre-labels.json'));

// Ajustez la taille d'entr√©e selon votre mod√®le
[{ resize: { width: 224, height: 224 } }] // Changez 224x224 si n√©cessaire
```

### 1. Configuration de l'API

Pour connecter l'application √† votre mod√®le de computer vision, vous devez modifier le service API :

**Fichier : `components/ApiService.ts`**

```typescript
// Remplacez cette URL par l'endpoint de votre API
private baseUrl: string = process.env.EXPO_PUBLIC_API_URL || 'https://votre-api.com';

// Modifiez la m√©thode analyzeImage selon votre format d'API
async analyzeImage(request: AnalysisRequest): Promise<AnalysisResponse> {
  const response = await fetch(`${this.baseUrl}/analyze`, {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
      'Authorization': `Bearer ${process.env.EXPO_PUBLIC_API_KEY}`,
      'Accept-Language': i18n.language,
    },
    body: JSON.stringify({
      image: request.image, // Image en base64
      format: request.format || 'jpg'
    }),
  });

  return await response.json();
}
```

### 2. Format des Donn√©es API

Votre API doit retourner une r√©ponse au format suivant :

```json
{
  "disease": "Cassava Mosaic Disease",
  "confidence": 0.94,
  "severity": "Moderate",
  "treatment": "Utiliser des plants r√©sistants, √©liminer les plants infect√©s",
  "recommendations": [
    "Isoler les plants infect√©s",
    "Appliquer un traitement pr√©ventif",
    "Surveiller r√©guli√®rement"
  ],
  "timestamp": "2025-01-15T14:30:00Z"
}
```

### 3. Personnalisation des Maladies (pour les deux modes)

Modifiez les fichiers de traduction pour ajouter vos propres maladies :

**Fichiers : `locales/fr.json` et `locales/en.json`**

```json
{
  "diseases": {
    "healthy": "Sain",
    "votreMaladie1": "Nom de votre maladie 1",
    "votreMaladie2": "Nom de votre maladie 2",
    "descriptions": {
      "votreMaladie1": "Description de la maladie 1"
    },
    "treatments": {
      "votreMaladie1": "Traitement recommand√© pour la maladie 1"
    }
  }
}
```

### 4. Configuration des Couleurs et Th√®me

Modifiez les couleurs dans les fichiers de style pour correspondre √† votre marque :

```typescript
// Couleurs principales
const colors = {
  primary: '#2D5016',    // Vert cassava
  secondary: '#E07A3F',  // Orange terre
  accent: '#F4E4BC',     // Beige
  success: '#1F7A1F',    // Vert succ√®s
  warning: '#E07A3F',    // Orange avertissement
  error: '#DC2626'       // Rouge erreur
};
```

## üì± Build et D√©ploiement

### Build pour Production

1. **Build web**
```bash
npm run build:web
```

2. **Build pour les stores (n√©cessite Expo EAS)**
```bash
# Installer EAS CLI
npm install -g eas-cli

# Configurer EAS
eas build:configure

# Build Android
eas build --platform android

# Build iOS
eas build --platform ios
```

### Variables d'Environnement de Production

Cr√©ez un fichier `.env.production` :

```env
EXPO_PUBLIC_API_URL=https://votre-api-production.com
EXPO_PUBLIC_API_KEY=votre_cle_production
```

## üîß D√©veloppement

### D√©pendances Principales

**Pour le mode API :**
- `expo-camera` : Acc√®s √† la cam√©ra
- `expo-image-picker` : S√©lection d'images
- `react-i18next` : Internationalisation

**Pour le mode local :**
- `@tensorflow/tfjs` : Ex√©cution des mod√®les TensorFlow.js
- `@tensorflow/tfjs-react-native` : Support React Native
- `expo-image-manipulator` : Pr√©traitement des images
- `expo-gl` : Support WebGL pour TensorFlow.js

### Structure du Projet

```
‚îú‚îÄ‚îÄ app/                    # Pages de l'application (Expo Router)
‚îÇ   ‚îú‚îÄ‚îÄ (tabs)/            # Navigation par onglets
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.tsx      # Page d'accueil
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ camera.tsx     # Interface cam√©ra
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ history.tsx    # Historique des analyses
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ settings.tsx   # Param√®tres
‚îÇ   ‚îî‚îÄ‚îÄ _layout.tsx        # Layout racine
‚îú‚îÄ‚îÄ components/            # Composants r√©utilisables
‚îÇ   ‚îú‚îÄ‚îÄ ApiService.ts      # Service API
‚îÇ   ‚îú‚îÄ‚îÄ LocalModelService.ts # Service mod√®le local
‚îÇ   ‚îî‚îÄ‚îÄ StorageService.ts  # Stockage local
‚îú‚îÄ‚îÄ assets/models/         # Mod√®les de computer vision
‚îÇ   ‚îú‚îÄ‚îÄ cassava-model.json # Mod√®le TensorFlow.js
‚îÇ   ‚îú‚îÄ‚îÄ cassava-model.bin  # Poids du mod√®le
‚îÇ   ‚îî‚îÄ‚îÄ labels.json        # Configuration des labels
‚îú‚îÄ‚îÄ locales/              # Fichiers de traduction
‚îÇ   ‚îú‚îÄ‚îÄ fr.json           # Traductions fran√ßaises
‚îÇ   ‚îî‚îÄ‚îÄ en.json           # Traductions anglaises
‚îú‚îÄ‚îÄ utils/                # Utilitaires
‚îÇ   ‚îî‚îÄ‚îÄ i18n.ts           # Configuration i18n
‚îî‚îÄ‚îÄ types/                # Types TypeScript
    ‚îî‚îÄ‚îÄ env.d.ts          # Types d'environnement
```

### Scripts Disponibles

```bash
npm run dev          # Lancer en mode d√©veloppement
npm run build:web    # Build pour le web
npm run lint         # V√©rifier le code
```

## üêõ D√©pannage

### Probl√®mes Courants

1. **Mod√®le local ne se charge pas**
   - V√©rifiez que les fichiers sont dans `assets/models/`
   - V√©rifiez que les chemins dans `LocalModelService.ts` sont corrects
   - Consultez les logs pour voir les erreurs de chargement

2. **Erreur "Metro bundler" avec TensorFlow.js**
   - Red√©marrez le serveur Metro : `npx expo start --clear`
   - V√©rifiez que toutes les d√©pendances TensorFlow.js sont install√©es

1. **QR code non visible**
   - V√©rifiez que `npm run dev` est en cours d'ex√©cution
   - Red√©marrez le serveur avec `Ctrl+C` puis `npm run dev`

2. **Erreur de connexion API**
   - V√©rifiez que `EXPO_PUBLIC_API_URL` est correctement configur√©
   - Testez votre API avec un outil comme Postman

3. **Probl√®me de langue**
   - V√©rifiez que les fichiers de traduction sont complets
   - Red√©marrez l'application apr√®s modification des traductions

4. **Erreur de cam√©ra**
   - Accordez les permissions cam√©ra sur votre t√©l√©phone
   - Testez sur un appareil physique (la cam√©ra ne fonctionne pas sur simulateur)

## üìÑ Licence

Ce projet est sous licence MIT. Voir le fichier `LICENSE` pour plus de d√©tails.

## ü§ù Contribution

Les contributions sont les bienvenues ! Veuillez ouvrir une issue ou soumettre une pull request.

## üìû Support

Pour toute question ou probl√®me, contactez [votre-email@example.com]

---

**CassavaHealth** - Aidons les agriculteurs √† maintenir des cultures saines gr√¢ce √† l'intelligence artificielle üå±